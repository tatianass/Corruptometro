# Apresentar os possíveis níveis de Classe
table(tre_sagres$classe)
# Partição de teste com os candidatos reeleitos
test_idx = which(tre_sagres$Candidato2016)
# Conjunto de treino e teste
test = tre_sagres[test_idx,]
train = tre_sagres[-test_idx,]
# Proporção dos conjuntos de treino e teste
prop.table(table(train$classe))
prop.table(table(test$classe))
#Treino do modelo
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 10,
trControl = fitControl)
predictions = predict(model,newdata=test)
prob = predict(model,newdata=test,type = "prob")
caret::confusionMatrix(predictions, test$classe)
model
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 10,
trControl = fitControl)
model
predictions = predict(model,newdata=test)
prob = predict(model,newdata=test,type = "prob")
caret::confusionMatrix(predictions, test$classe)
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 10,
trControl = fitControl)
model
predictions = predict(model,newdata=test)
prob = predict(model,newdata=test,type = "prob")
caret::confusionMatrix(predictions, test$classe)
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 15,
trControl = fitControl)
model
source("Corruptometro/scripts/R/imports.R")
# Excutar script data.R
#source("data.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
# Apresentar os possíveis níveis de Classe
table(tre_sagres$classe)
# Partição de teste com os candidatos reeleitos
test_idx = which(tre_sagres$Candidato2016)
# Conjunto de treino e teste
test = tre_sagres[test_idx,]
train = tre_sagres[-test_idx,]
# Proporção dos conjuntos de treino e teste
prop.table(table(train$classe))
prop.table(table(test$classe))
#Treino do modelo
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 10,
trControl = fitControl)
model
predictions = predict(model,newdata=test)
prob = predict(model,newdata=test,type = "prob")
caret::confusionMatrix(predictions, test$classe)
source("Corruptometro/scripts/R/imports.R")
# Excutar script data.R
#source("data.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
# Apresentar os possíveis níveis de Classe
table(tre_sagres$classe)
# Partição de teste com os candidatos reeleitos
test_idx = which(tre_sagres$Candidato2016)
# Conjunto de treino e teste
test = tre_sagres[test_idx,]
train = tre_sagres[-test_idx,]
# Proporção dos conjuntos de treino e teste
prop.table(table(train$classe))
prop.table(table(test$classe))
#Treino do modelo
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 15,
trControl = fitControl)
model
predictions = predict(model,newdata=test)
prob = predict(model,newdata=test,type = "prob")
caret::confusionMatrix(predictions, test$classe)
source("Corruptometro/scripts/R/imports.R")
# Excutar script data.R
#source("data.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
# Apresentar os possíveis níveis de Classe
table(tre_sagres$classe)
# Partição de teste com os candidatos reeleitos
test_idx = which(tre_sagres$Candidato2016)
# Conjunto de treino e teste
test = tre_sagres[test_idx,]
train = tre_sagres[-test_idx,]
# Proporção dos conjuntos de treino e teste
prop.table(table(train$classe))
prop.table(table(test$classe))
#Treino do modelo
fitControl = trainControl(method="repeatedcv", number=10, repeats=10, returnResamp="all")
model = train(form = classe ~ nu_Aditivo_Valor_Prop_Eleitores + nu_Aditivos_Totais_Prop_Eleitores,
data = train,
method = "knn",
preProcess = c("scale"),
tuneLength = 30,
trControl = fitControl)
model
predictions = predict(model,newdata=test)
prob = predict(model,newdata=test,type = "prob")
caret::confusionMatrix(predictions, test$classe)
setwd("~/GitHub")
source("Corruptometro/scripts/R/imports.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
View(tre_sagres)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";")
View(cidades)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25)
View(cidades)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO))
View(cidades)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO))
View(cidades)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO))
View(cidades)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO))
View(cidades)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO))
View(cidades)
View(tre_sagres)
?full_join
x <- full_join(tre_sagres, cidades)
View(tre_sagres)
View(cidades)
View(tre_sagres)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO), de_Ugestora = Município)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>% filter(UF==25, ANO == max(ANO), de_Ugestora == Município)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% select(de_Ugestora == Município)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% select(de_Ugestora = Município)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Município)
View(cidades)
x <- full_join(tre_sagres, cidades, by = de_Ugestora)
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
x <- left_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Município)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",")
levels(cidades$UF)
range(cidades$UF)
unique(cidades$UF)
length(unique(cidades$UF))
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
select(x, CORTE2==NA)
select(x, is.na(CORTE2))
filter(x, is.na(CORTE2))
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
View(cidades)
View(tre_sagres)
cidades[,"TACIMA"]
cidades["TACIMA"]
which(cidades == "TACIMA", arr.ind=TRUE)
cidades[which(cidades == "TACIMA", arr.ind=TRUE)] <- "CAMPO DE SANTANA"
which(cidades == "TACIMA", arr.ind=TRUE)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
which(cidades == "TACIMA", arr.ind=TRUE)
cidades[which(cidades == "TACIMA", arr.ind=TRUE)]
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- "SAO VICENTE DO SERIDO"
View(cidades)
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
filter(x, is.na(CORTE2))
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
filter(x, is.na(CORTE2))
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(tre_sagres)
View(cidades)
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"]
cidades$de_Ugestora == "TACIMA"
cidades$de_Ugestora[as.character(cidades$de_Ugestora) == "TACIMA"] <- "CAMPO DE SANTANA"
as.character(cidades$de_Ugestora) == "TACIMA"
cidades$de_Ugestora[213,]
cidades[213,]
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades[213,]
cidades$de_Ugestora[as.character(cidades$de_Ugestora) == "TACIMA"] <- "CAMPO DE SANTANA"
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora
as.character(cidades$de_Ugestora)
as.character(cidades$de_Ugestora) == "TACIMA"
cidades$de_Ugestora[as.character(cidades$de_Ugestora) == "TACIMA"]
cidades$de_Ugestora[as.character(cidades$de_Ugestora) == "TACIMA"] <- factor("CAMPO DE SANTANA")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",") %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora == "TACIMA"
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"]
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- factor("CAMPO DE SANTANA")
cidades$de_Ugestora[213, 5] <- factor("CAMPO DE SANTANA")
cidades[213, 5] <- factor("CAMPO DE SANTANA")
cidades[213, 5] <- "CAMPO DE SANTANA"
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8")
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
cidades$de_Ugestora[cidades$de_Ugestora == "TACIMA"] <- "CAMPO DE SANTANA"
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
x <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(x)
source("Corruptometro/scripts/R/imports.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora")
View(cidades)
colnames(cidades)
4.58+2.5+24.08+6.58+26.13+12.27+30.9
select(dados_completos, 235:237)
a<-select(dados_completos, 235:237)
View(a)
a<-select(cidades, 235:237)
View(a)
a<-select(cidades, 233:237)
View(a)
a<-select(cidades, 230:237)
View(a)
colnames(a)
View(a)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>%
select(espectativa_de_vida = ESPVIDA, indice_escolaridade = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E,
IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
View(dados_completos)
View(tre_sagres)
View(tre_sagres)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>%
select(Cidade = de_Ugestora, Eleito, Contas = classe, numero_dispensas = nu_Dispensas, numero_aditivo_prazo = nu_Aditivo_Prazo,espectativa_de_vida = ESPVIDA, indice_escolaridade = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E,
IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Cidade = de_Ugestora, Eleito, Contas = classe, numero_dispensas = nu_Dispensas,
numero_aditivos_prazo = nu_Aditivo_Prazo, numero_aditivos_valor = nu_Aditivo_Valor,
numero_convites = nu_Convites, espectativa_de_vida = ESPVIDA, indice_escolaridade = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
View(dados_completos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(CIDADE = de_Ugestora, ELEITO = Eleito, CONTAS = classe, NUMERO_DISPENSAS = nu_Dispensas,
NUMERO_ADITIVOS_PRAZO = nu_Aditivo_Prazo, NUMERO_ADITIVOS_VALOR = nu_Aditivo_Valor,
NUMERO_CONVITES = nu_Convites, ESPECTATIVA_VIDA = ESPVIDA, INDICE_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
View(dados_completos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(CIDADE = de_Ugestora, ELEITO = Eleito, CONTAS = classe, NUMERO_DISPENSAS = nu_Dispensas,
NUMERO_ADITIVOS_PRAZO = nu_Aditivo_Prazo, NUMERO_ADITIVOS_VALOR = nu_Aditivo_Valor,
NUMERO_CONVITES = nu_Convites, EXPECTATIVA_VIDA = ESPVIDA, INDICE_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
tre_sagres$classe <- with(tre_sagres$classe, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
ifelse(classe == "IRREGULAR", "SIM", "NAO")
ifelse(tre_sagres$classe == "IRREGULAR", "SIM", "NAO")
tre_sagres$classe <- with(tre_sagres, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
source("Corruptometro/scripts/R/imports.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
tre_sagres$classe <- with(tre_sagres, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo,
nu_Aditivo_Valor, nu_Convites, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM,
IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
sink("indices_cidades.json")
cat(jsonlite::toJSON(dados_completos))
sink()
View(cidades)
colnames(cidades)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo,
nu_Aditivo_Valor, nu_Convites, Populacao = POP,Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM,
IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo,
nu_Aditivo_Valor, nu_Convites, nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos,
nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos, Populacao = POP, Exp_Vida = ESPVIDA,
Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
View(dados_completos)
signif(0.123456789, digits = 6)
signif(014235.123456789, digits = 6)
trunc(014235.123456789, digits = 6)
trunc(01423511.123456789, digits = 6)
trunc(0.123456789, prec = 4)
signif(014235.123456789, digits = 6)
format_number <- function(x){
signif(x, digits=5)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
tre_sagres$nu_Dispensas_Prop_Contratos
signif(tre_sagres$nu_Dispensas_Prop_Contratos[1], digits = 5)
format_number <- function(x){
signif(x, digits=5)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1])
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1:2])
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1:3])
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1:5])
format_number <- function(x){
signif(x, digits=3)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1:5])
format_number <- function(x){
signif(x, digits=1)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1:5])
format_number <- function(x){
signif(x, digits=2)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos[1:5])
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
format_number <- function(x){
trunc(x, digits=2)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
format_number <- function(x){
round(x, digits=3)
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
format_number <- function(x){
round(x, digits=3)*100
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
format_number <- function(x){
paste(round(x, digits=3)*100,"%",sep="")
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
format_number(nu_Dispensas), format_number(nu_Aditivo_Prazo), format_number(nu_Aditivo_Valor), format_number(nu_Convites),
format_number(nu_Dispensas_Prop_Contratos), format_number(nu_Aditivo_Prazo_Prop_Contratos), format_number(nu_Aditivo_Valor_Prop_Contratos),
format_number(nu_Convites_Prop_Contratos), Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
View(dados_completos)
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
tre_sagres$classe <- with(tre_sagres, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
format_number <- function(x){
paste(round(x, digits=3)*100,"%",sep="")
}
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
format_number(nu_Dispensas), Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
format_number <- function(x){
round(x, digits=3)*100
}
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
format_number(nu_Dispensas), Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
format_number <- function(x){
round(x, digits=3)*100
}
format_number(tre_sagres$nu_Dispensas)
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
format_number(nu_Dispensas_Prop_Contratos), Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
nu_Dispensas_Prop_Contratos_Percent = format_number(nu_Dispensas_Prop_Contratos), Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE,
IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
format_number(nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
source("imports.R")
setwd("~/GitHub/Corruptometro/scripts/R")
source("imports.R")
source("imports.R")
tre_sagres <- read.csv('Corruptometro/data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('Corruptometro/data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
tre_sagres$classe <- with(tre_sagres, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
format_number <- function(x){
round(x, digits=3)*100
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
tre_sagres <- read.csv('../../data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('../../data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
source("imports.R")
tre_sagres <- read.csv('../../data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('../../data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
tre_sagres$classe <- with(tre_sagres, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
format_number <- function(x){
round(x, digits=3)*100
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
sink("indices_cidades.json")
cat(jsonlite::toJSON(dados_completos))
sink()
source("imports.R")
tre_sagres <- read.csv('../../data/tre_sagres_unificado.csv', encoding = "UTF-8", stringsAsFactors = F)
cidades <- read.csv('../../data/municipios.csv', encoding = "UTF-8", sep = ";", dec = ",", stringsAsFactors = F) %>%
filter(UF==25, ANO == max(ANO)) %>% rename(de_Ugestora = Municipio)
tre_sagres$de_Ugestora[tre_sagres$de_Ugestora == "CAMPO DE SANTANA"] <- "TACIMA"
tre_sagres$classe <- with(tre_sagres, ifelse(classe == "IRREGULAR", "SIM", "NAO"))
format_number <- function(x){
round(x, digits=3)*100
}
format_number(tre_sagres$nu_Dispensas_Prop_Contratos)
dados_completos <- full_join(tre_sagres, cidades, by = "de_Ugestora") %>% filter(Candidato2016) %>%
select(Prefeitura = de_Ugestora, Nome = Eleito, Irregular = classe, nu_Dispensas, nu_Aditivo_Prazo, nu_Aditivo_Valor, nu_Convites,
nu_Dispensas_Prop_Contratos, nu_Aditivo_Prazo_Prop_Contratos, nu_Aditivo_Valor_Prop_Contratos, nu_Convites_Prop_Contratos,
Populacao = POP, Exp_Vida = ESPVIDA, Ind_ESCOLARIDADE = I_ESCOLARIDADE, IDHM, IDHM_EDUCACAO = IDHM_E, IDHM_LONGEVIDADE = IDHM_L, IDHM_RENDA = IDHM_R)
# format_number(nu_Dispensas_Prop_Contratos), format_number(nu_Aditivo_Prazo_Prop_Contratos), format_number(nu_Aditivo_Valor_Prop_Contratos),
# format_number(nu_Convites_Prop_Contratos)
sink("indices_cidades.json")
cat(jsonlite::toJSON(dados_completos))
sink()
